<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>CalcApp</title>
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<style>
		body { font-family: system-ui, Arial, sans-serif; margin: 2rem; background:#f7f9fc; color:#222; }
		h1 { margin-top:0; }
		form { display:flex; gap:.5rem; flex-wrap:wrap; }
		input[type=text] { flex:1 1 320px; padding:.6rem .8rem; font-size:1rem; }
		button { padding:.6rem 1rem; font-size:1rem; cursor:pointer; background:#2563eb; color:#fff; border:none; border-radius:4px; }
		button:hover { background:#1d4ed8; }
		#resultBox { margin-top:1rem; padding:1rem; border:1px solid #d0d7de; background:#fff; border-radius:6px; min-height:2.2rem; }
		.error { color:#b91c1c; }
		footer { margin-top:3rem; font-size:.8rem; color:#555; }
		code { background:#eef; padding:2px 4px; border-radius:4px; }
	</style>
</head>
<body>
	<h1>CalcApp Expression Evaluator</h1>
	<p>Enter an arithmetic expression using <code>+ - * / ( )</code> and click Evaluate.</p>
	<form id="calcForm">
		<input id="expr" type="text" placeholder="e.g. (2+3)*4" required />
		<button type="submit">Evaluate</button>
	</form>
	<div id="resultBox">Result will appear here.</div>
	<script>
		const form = document.getElementById('calcForm');
		const input = document.getElementById('expr');
		const box = document.getElementById('resultBox');
		form.addEventListener('submit', async (e) => {
			e.preventDefault();
			const expr = input.value.trim();
			if(!expr){ box.textContent = 'Please enter an expression.'; return; }
			box.textContent = 'Evaluating...';
			try {
				const resp = await fetch(`/calc?expr=${encodeURIComponent(expr)}`);
				const data = await resp.json();
				if(!resp.ok){ box.innerHTML = `<span class="error">Error: ${data.error}</span>`; }
				else { box.textContent = `${data.expression} = ${data.result}`; }
			} catch(err){
				box.innerHTML = `<span class="error">Network error: ${err.message}</span>`;
			}
		});
	</script>
	<footer>
		<p>Try examples: <code>2+3*4</code>, <code>(2+3)*4</code>, <code>3+4*2/(1-5)</code></p>
	</footer>
</body>
</html>
